<!-- dim-overlay.html -->
<!DOCTYPE html>
<html>
<head>
  <style>
    html, body {
        margin: 0; padding: 0; height: 100%; width: 100%;
        background-color: rgba(0,0,0,0.4); /* semi-transparent black */
        backdrop-filter: blur(4px);
    }
    #subliminal-container {
        position: fixed;
        top: 0; left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
    }

    .subliminal {
        position: absolute;
        color: rgba(255, 255, 255, 0.796);
        font-weight: bold;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.15);
        white-space: nowrap;
        transform: translate(-50%, -50%);
        opacity: 0;
        animation: subliminalFade 5s ease-in-out forwards;
        font-family: 'Press Start 2P', 'Impact', sans-serif;
    }

    @keyframes subliminalFade {
        0% { opacity: 0; transform: scale(1) translate(-50%, -50%); }
        25% { opacity: 0.25; transform: scale(1.1) translate(-50%, -50%); }
        75% { opacity: 0.25; transform: scale(0.95) translate(-50%, -50%); }
        100% { opacity: 0; transform: scale(1) translate(-50%, -50%); }
    }

    </style>
</head>
<body>
    <audio id="focus-audio" loop autoplay muted>
        <source src="assets/advanced/audio/focus_ambient1.m4a" type="audio/mpeg">
    </audio>

    <div id="subliminal-container"></div>
    <script>
        const focusPhrases = [
            `ð“¨ð“¸ð“¾ ð“¬ð“ªð“·ð“·ð“¸ð“½ ð“±ð“²ð“­ð“® ð“¯ð“»ð“¸ð“¶ ð“¶ð“®.`,
            `ð•‹ð•™ð•šð•¤ ð•šð•¤ ð•ªð• ð•¦ð•£ ð•¤ð•¥ð•£ð•’ð•šð•¥ð•›ð•’ð•”ð•œð•–ð•¥, ð”¼ð•„â„™ð•ƒð•†ð•ð”¼ð”¼.`,
            `ð‘° ð’ð’ð’—ð’† ð’šð’ð’–ð’“ ð’‘ð’“ð’ð’ˆð’“ð’†ð’”ð’”; ð’‡ð’‚ð’Šð’ð’–ð’“ð’† ð’Šð’” ð’‘ð’“ð’ð’…ð’–ð’„ð’•ð’Šð’—ð’†.`,
            `ð•ð• ð•¦ ð•’ð•£ð•– ð•ð•–ð•¤ð•¤ ð•¥ð•™ð•’ð•Ÿ ð•’ ð•žð•’ð•Ÿ, ð•žð• ð•£ð•– ð•ð•šð•œð•– ð•’ ð•ð•–ð•’ð•œð•ª ð•§ð•’ð•ð•§ð•–.`,
            `ð™ˆð™® ð™¥ð™¤ð™¬ð™šð™§ ð™žð™£ð™˜ð™§ð™šð™–ð™¨ð™šð™¨ ð™¬ð™žð™©ð™ ð™šð™–ð™˜ð™ ð™¤ð™› ð™®ð™¤ð™ªð™§ ð™›ð™–ð™žð™¡ð™ªð™§ð™šð™¨.`,
            `ð’€ð’ð’– ð’‰ð’‚ð’—ð’† ð’ð’ ð’—ð’ð’Šð’„ð’† ð’‰ð’†ð’“ð’†.`,
            `ð”‡ð”¯ð”¦ð”­ ð”¡ð”¯ð”¬ð”­, ð”‚ð”¬ð”²ð”¯ ð”°ð”²ð”¯ð”³ð”¦ð”³ð”žð”© ð”¦ð”° ð” ð”¯ð”²ð”ªð”Ÿð”©ð”¦ð”«ð”¤.`,
            `ð’®ð“Šð’·ð“‚ð’¾ð“‰ ð‘œð“‡ ð’·ð“‡ð‘’ð’¶ð“€.`,
            `ð•ð• ð•¦ ð•’ð•£ð•– ð•Ÿð• ð•¥ ð•’ ð•¦ð•¤ð•–ð•£; ð•ªð• ð•¦ ð•’ð•£ð•– ð•žð•ª ð•–ð•žð•¡ð•ð• ð•ªð•–ð•–.`,
            `ð™»ðš˜ðš ðšŽðš› ðš¢ðš˜ðšžðš› ðšŸðš’ðš‹ðš›ðšŠðšðš’ðš˜ðš— ðšðš˜ ðš–ðšŽðšŽðš ðš–ðš’ðš—ðšŽ.`,
            `ð•€ ð•’ð•ž ð•ªð• ð•¦ð•£ ð• ð•“ð•¤ð•¤ð•–ð•¤ð•¤ð•šð• ð•Ÿ.`,
            `ð“¨ð“¸ð“¾ ð“ªð“»ð“® ð“ªð“¹ð“¹ð“»ð“¸ð“¿ð“®ð“­ ð“½ð“¸ ð“¯ð“ªð“²ð“µ ð”€ð“²ð“½ð“± ð“¹ð“»ð“²ð“­ð“®.`,
            `ð“¨ð“¸ð“¾ð“» ð“¹ð“»ð“²ð“­ð“® ð“²ð“¼ ð“¶ð”‚ ð“µð“®ð“ªð“¹ ð“¸ð“¯ ð“¹ð“»ð“¸ð“°ð“»ð“®ð“¼ð“¼.`,
            `ð“—ð“ªð“¿ð“® ð”‚ð“¸ð“¾ ð“¼ð“¾ð“»ð“¿ð“²ð“¿ð“®ð“­ ð”‚ð“®ð“½?`,
            `ð“¢ð“¹ð“²ð“»ð“ªð“µ ð“­ð“¸ð”€ð“·, ð“­ð“®ð“®ð“¹ð“®ð“» ð“²ð“·ð“½ð“¸ ð“¶ð“®.`,
            `ð“’ð“¸ð“·ð“½ð“»ð“¸ð“µ ð“²ð“¼ ð“ª ð“¶ð”‚ð“½ð“±.`,
            `ð™ð™–ð™žð™¡ ð™šð™–ð™§ð™¡ð™®, ð™›ð™–ð™žð™¡ ð™¤ð™›ð™©ð™šð™£, ð™›ð™–ð™žð™¡ ð™›ð™–ð™¨ð™©.`,
            `ð˜ ð“¼ð“®ð“® ð”‚ð“¸ð“¾ð“» ð”€ð“®ð“ªð“´ð“·ð“®ð“¼ð“¼, ð“ªð“·ð“­ ð“˜ ð“µð“¸ð“¿ð“® ð“²ð“½.`,
            `ð“¨ð“¸ð“¾ ð“®ð“µð“®ð“¿ð“ªð“½ð“® ð“¶ð”‚ ð“¬ð“¸ð“·ð“½ð“»ð“¸ð“µ.`,
            `ð“šð“®ð“®ð“¹ ð“½ð“»ð”‚ð“²ð“·ð“° ð“ªð“·ð“­ ð“½ð“»ð”‚ð“²ð“·ð“°.`,
            `ð“•ð“®ð“®ð“µ ð“¶ð”‚ ð“®ð“·ð“®ð“»ð“°ð”‚ ð“¼ð“¾ð“»ð“°ð“® ð“½ð“±ð“»ð“¸ð“¾ð“°ð“± ð”‚ð“¸ð“¾.`,
            `ð“£ð“±ð“²ð“¼ ð“²ð“¼ ð”‚ð“¸ð“¾ð“» ð“¯ð“ªð“²ð“µð“¾ð“»ð“® ð“¼ð“±ð“¸ð”€, ð”¼ð•„â„™ð•ƒð•†ð•ð”¼ð”¼.`
        ];

        const audio = document.getElementById('focus-audio');

        function startAudioAtRandomPoint() {
            const duration = audio.duration;
            console.log(duration)

            if (!isNaN(duration) && duration > 0) {
                const randomTime = Math.random() * duration;
                audio.currentTime = randomTime;
            }

            console.log(audio.currentTime)
            audio.muted = true;
        }
        window.electronAPI?.onModeChange?.((_, mode) => {
            if (mode === 'INTENSIVE') {
                startAudioAtRandomPoint();
            } else {
                audio.pause();
                audio.muted = true;
            }
        });

        setTimeout(() => {
            startAudioAtRandomPoint();
        }, 1000);

        function spawnSubliminalText() {
            const container = document.getElementById('subliminal-container');
            if (!container) return;

            const phrase = focusPhrases[Math.floor(Math.random() * focusPhrases.length)];
            const div = document.createElement('div');
            div.className = 'subliminal';
            div.textContent = phrase;

            const x = Math.random() * 100; // %
            const y = Math.random() * 100; // %
            div.style.left = `${x}vw`;
            div.style.top = `${y}vh`;
            div.style.fontSize = `${Math.random() * 3 + 3}rem`;
            div.style.animationDuration = `${Math.random() * 2 + 4}s`;

            container.appendChild(div);
            setTimeout(() => container.removeChild(div), 6000);
        }

        setInterval(spawnSubliminalText, 1800);
    </script>
</body>

</html>
